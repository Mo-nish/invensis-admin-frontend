{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Typography,Box,Card,CardContent,TextField,Button,FormControl,InputLabel,Select,MenuItem,Alert,Chip,Grid,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper,IconButton,Dialog,DialogTitle,DialogContent,DialogActions,CircularProgress}from'@mui/material';import{Delete as DeleteIcon,Email as EmailIcon}from'@mui/icons-material';import{toast}from'react-toastify';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RoleManagement=()=>{const[assignments,setAssignments]=useState([]);const[limits,setLimits]=useState({});const[currentCounts,setCurrentCounts]=useState({});const[loading,setLoading]=useState(true);const[addingUser,setAddingUser]=useState(false);const[formData,setFormData]=useState({email:'',role:''});const[errors,setErrors]=useState({});useEffect(()=>{fetchAssignments();fetchLimits();},[]);const fetchAssignments=async()=>{try{const token=localStorage.getItem('admin_token');const response=await fetch('/api/admin/roles',{headers:{'Authorization':`Bearer ${token}`}});if(response.ok){const data=await response.json();setAssignments(data);}else{toast.error('Failed to fetch role assignments');}}catch(error){console.error('Error fetching assignments:',error);toast.error('Failed to fetch role assignments');}};const fetchLimits=async()=>{try{const token=localStorage.getItem('admin_token');const response=await fetch('/api/admin/roles/limits',{headers:{'Authorization':`Bearer ${token}`}});if(response.ok){const data=await response.json();setLimits(data.limits);setCurrentCounts(data.currentCounts);}else{toast.error('Failed to fetch role limits');}}catch(error){console.error('Error fetching limits:',error);toast.error('Failed to fetch role limits');}finally{setLoading(false);}};const handleAddUser=async e=>{e.preventDefault();// Validate form\nconst newErrors={};if(!formData.email)newErrors.email='Email is required';if(!formData.role)newErrors.role='Role is required';if(Object.keys(newErrors).length>0){setErrors(newErrors);return;}setAddingUser(true);setErrors({});try{const token=localStorage.getItem('admin_token');const response=await fetch('/api/admin/roles',{method:'POST',headers:{'Content-Type':'application/json','Authorization':`Bearer ${token}`},body:JSON.stringify(formData)});const result=await response.json();if(response.ok){toast.success('User added successfully');setFormData({email:'',role:''});fetchAssignments();fetchLimits();}else{toast.error(result.message||'Failed to add user');}}catch(error){console.error('Error adding user:',error);toast.error('Failed to add user');}finally{setAddingUser(false);}};const handleDeleteUser=async id=>{if(!window.confirm('Are you sure you want to delete this user?')){return;}try{const token=localStorage.getItem('admin_token');const response=await fetch(`/api/admin/roles/${id}`,{method:'DELETE',headers:{'Authorization':`Bearer ${token}`}});if(response.ok){toast.success('User deleted successfully');fetchAssignments();fetchLimits();}else{toast.error('Failed to delete user');}}catch(error){console.error('Error deleting user:',error);toast.error('Failed to delete user');}};const getRoleColor=role=>{const count=currentCounts[role]||0;const limit=limits[role]||0;const percentage=count/limit*100;if(percentage>=90)return'error';if(percentage>=75)return'warning';return'success';};const getStatusColor=status=>{switch(status){case'active':return'success';case'pending':return'warning';case'inactive':return'error';default:return'default';}};if(loading){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",minHeight:\"400px\",children:/*#__PURE__*/_jsx(CircularProgress,{})});}return/*#__PURE__*/_jsxs(Container,{maxWidth:\"lg\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"Role Management\"}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:3,sx:{mb:4},children:Object.keys(limits).map(role=>{const count=currentCounts[role]||0;const limit=limits[role];const percentage=count/limit*100;return/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:3,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:role}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",color:getRoleColor(role),children:[count,\"/\",limit]}),/*#__PURE__*/_jsx(Chip,{label:`${percentage.toFixed(0)}%`,color:getRoleColor(role),size:\"small\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:count>=limit?'Limit reached':`${limit-count} slots available`})]})})},role);})}),/*#__PURE__*/_jsx(Card,{sx:{mb:4},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Add New User\"}),/*#__PURE__*/_jsx(Box,{component:\"form\",onSubmit:handleAddUser,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Email Address\",name:\"email\",value:formData.email,onChange:e=>setFormData({...formData,email:e.target.value}),error:!!errors.email,helperText:errors.email,disabled:addingUser})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:4,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,error:!!errors.role,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Role\"}),/*#__PURE__*/_jsxs(Select,{name:\"role\",value:formData.role,onChange:e=>setFormData({...formData,role:e.target.value}),disabled:addingUser,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"HR\",children:\"HR\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Manager\",children:\"Manager\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Board Member\",children:\"Board Member\"})]}),errors.role&&/*#__PURE__*/_jsx(Typography,{variant:\"caption\",color:\"error\",sx:{mt:0.5,display:'block'},children:errors.role})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:2,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"contained\",disabled:addingUser||!formData.email||!formData.role,sx:{height:'56px'},children:addingUser?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Add User'})})]})})]})}),Object.keys(limits).some(role=>{const count=currentCounts[role]||0;const limit=limits[role];return count>=limit;})&&/*#__PURE__*/_jsx(Alert,{severity:\"warning\",sx:{mb:3},children:\"Some roles have reached their limits. Users cannot be added to these roles until existing users are removed.\"}),/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Current Users\"}),/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Email\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Role\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Invited By\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Invited At\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Registered At\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:assignments.map(assignment=>{var _assignment$invitedBy;return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:assignment.email}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:assignment.role,color:getRoleColor(assignment.role),size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:assignment.status,color:getStatusColor(assignment.status),size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{children:((_assignment$invitedBy=assignment.invitedBy)===null||_assignment$invitedBy===void 0?void 0:_assignment$invitedBy.name)||'Unknown'}),/*#__PURE__*/_jsx(TableCell,{children:new Date(assignment.invitedAt).toLocaleDateString()}),/*#__PURE__*/_jsx(TableCell,{children:assignment.registeredAt?new Date(assignment.registeredAt).toLocaleDateString():'Not registered'}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(IconButton,{onClick:()=>handleDeleteUser(assignment._id),color:\"error\",size:\"small\",children:/*#__PURE__*/_jsx(DeleteIcon,{})})})]},assignment._id);})})]})})]})})]});};export default RoleManagement;","map":{"version":3,"names":["React","useState","useEffect","Container","Typography","Box","Card","CardContent","TextField","Button","FormControl","InputLabel","Select","MenuItem","Alert","Chip","Grid","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","IconButton","Dialog","DialogTitle","DialogContent","DialogActions","CircularProgress","Delete","DeleteIcon","Email","EmailIcon","toast","jsx","_jsx","jsxs","_jsxs","RoleManagement","assignments","setAssignments","limits","setLimits","currentCounts","setCurrentCounts","loading","setLoading","addingUser","setAddingUser","formData","setFormData","email","role","errors","setErrors","fetchAssignments","fetchLimits","token","localStorage","getItem","response","fetch","headers","ok","data","json","error","console","handleAddUser","e","preventDefault","newErrors","Object","keys","length","method","body","JSON","stringify","result","success","message","handleDeleteUser","id","window","confirm","getRoleColor","count","limit","percentage","getStatusColor","status","display","justifyContent","alignItems","minHeight","children","maxWidth","variant","gutterBottom","container","spacing","sx","mb","map","item","xs","sm","md","color","label","toFixed","size","component","onSubmit","fullWidth","name","value","onChange","target","helperText","disabled","mt","type","height","some","severity","assignment","_assignment$invitedBy","invitedBy","Date","invitedAt","toLocaleDateString","registeredAt","onClick","_id"],"sources":["/Users/monishreddy/Documents/Invensis Recruiteres copy/admin-portal/admin-frontend-deploy/src/components/dashboard/RoleManagement.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Container,\n  Typography,\n  Box,\n  Card,\n  CardContent,\n  TextField,\n  Button,\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Alert,\n  Chip,\n  Grid,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n  TableRow,\n  Paper,\n  IconButton,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  CircularProgress\n} from '@mui/material';\nimport { Delete as DeleteIcon, Email as EmailIcon } from '@mui/icons-material';\nimport { toast } from 'react-toastify';\n\nconst RoleManagement = () => {\n  const [assignments, setAssignments] = useState([]);\n  const [limits, setLimits] = useState({});\n  const [currentCounts, setCurrentCounts] = useState({});\n  const [loading, setLoading] = useState(true);\n  const [addingUser, setAddingUser] = useState(false);\n  const [formData, setFormData] = useState({\n    email: '',\n    role: ''\n  });\n  const [errors, setErrors] = useState({});\n\n  useEffect(() => {\n    fetchAssignments();\n    fetchLimits();\n  }, []);\n\n  const fetchAssignments = async () => {\n    try {\n      const token = localStorage.getItem('admin_token');\n      const response = await fetch('/api/admin/roles', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setAssignments(data);\n      } else {\n        toast.error('Failed to fetch role assignments');\n      }\n    } catch (error) {\n      console.error('Error fetching assignments:', error);\n      toast.error('Failed to fetch role assignments');\n    }\n  };\n\n  const fetchLimits = async () => {\n    try {\n      const token = localStorage.getItem('admin_token');\n      const response = await fetch('/api/admin/roles/limits', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setLimits(data.limits);\n        setCurrentCounts(data.currentCounts);\n      } else {\n        toast.error('Failed to fetch role limits');\n      }\n    } catch (error) {\n      console.error('Error fetching limits:', error);\n      toast.error('Failed to fetch role limits');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddUser = async (e) => {\n    e.preventDefault();\n    \n    // Validate form\n    const newErrors = {};\n    if (!formData.email) newErrors.email = 'Email is required';\n    if (!formData.role) newErrors.role = 'Role is required';\n    \n    if (Object.keys(newErrors).length > 0) {\n      setErrors(newErrors);\n      return;\n    }\n\n    setAddingUser(true);\n    setErrors({});\n\n    try {\n      const token = localStorage.getItem('admin_token');\n      const response = await fetch('/api/admin/roles', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(formData)\n      });\n\n      const result = await response.json();\n\n      if (response.ok) {\n        toast.success('User added successfully');\n        setFormData({ email: '', role: '' });\n        fetchAssignments();\n        fetchLimits();\n      } else {\n        toast.error(result.message || 'Failed to add user');\n      }\n    } catch (error) {\n      console.error('Error adding user:', error);\n      toast.error('Failed to add user');\n    } finally {\n      setAddingUser(false);\n    }\n  };\n\n  const handleDeleteUser = async (id) => {\n    if (!window.confirm('Are you sure you want to delete this user?')) {\n      return;\n    }\n\n    try {\n      const token = localStorage.getItem('admin_token');\n      const response = await fetch(`/api/admin/roles/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n\n      if (response.ok) {\n        toast.success('User deleted successfully');\n        fetchAssignments();\n        fetchLimits();\n      } else {\n        toast.error('Failed to delete user');\n      }\n    } catch (error) {\n      console.error('Error deleting user:', error);\n      toast.error('Failed to delete user');\n    }\n  };\n\n  const getRoleColor = (role) => {\n    const count = currentCounts[role] || 0;\n    const limit = limits[role] || 0;\n    const percentage = (count / limit) * 100;\n    \n    if (percentage >= 90) return 'error';\n    if (percentage >= 75) return 'warning';\n    return 'success';\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'active': return 'success';\n      case 'pending': return 'warning';\n      case 'inactive': return 'error';\n      default: return 'default';\n    }\n  };\n\n  if (loading) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"400px\">\n        <CircularProgress />\n      </Box>\n    );\n  }\n\n  return (\n    <Container maxWidth=\"lg\">\n      <Typography variant=\"h4\" gutterBottom>\n        Role Management\n      </Typography>\n\n      {/* Role Limits Overview */}\n      <Grid container spacing={3} sx={{ mb: 4 }}>\n        {Object.keys(limits).map((role) => {\n          const count = currentCounts[role] || 0;\n          const limit = limits[role];\n          const percentage = (count / limit) * 100;\n          \n          return (\n            <Grid item xs={12} sm={6} md={3} key={role}>\n              <Card>\n                <CardContent>\n                  <Typography variant=\"h6\" gutterBottom>\n                    {role}\n                  </Typography>\n                  <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n                    <Typography variant=\"h4\" color={getRoleColor(role)}>\n                      {count}/{limit}\n                    </Typography>\n                    <Chip \n                      label={`${percentage.toFixed(0)}%`}\n                      color={getRoleColor(role)}\n                      size=\"small\"\n                    />\n                  </Box>\n                  <Typography variant=\"body2\" color=\"textSecondary\">\n                    {count >= limit ? 'Limit reached' : `${limit - count} slots available`}\n                  </Typography>\n                </CardContent>\n              </Card>\n            </Grid>\n          );\n        })}\n      </Grid>\n\n      {/* Add User Form */}\n      <Card sx={{ mb: 4 }}>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Add New User\n          </Typography>\n          <Box component=\"form\" onSubmit={handleAddUser}>\n            <Grid container spacing={2}>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  label=\"Email Address\"\n                  name=\"email\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  error={!!errors.email}\n                  helperText={errors.email}\n                  disabled={addingUser}\n                />\n              </Grid>\n              <Grid item xs={12} sm={4}>\n                <FormControl fullWidth error={!!errors.role}>\n                  <InputLabel>Role</InputLabel>\n                  <Select\n                    name=\"role\"\n                    value={formData.role}\n                    onChange={(e) => setFormData({ ...formData, role: e.target.value })}\n                    disabled={addingUser}\n                  >\n                    <MenuItem value=\"HR\">HR</MenuItem>\n                    <MenuItem value=\"Manager\">Manager</MenuItem>\n                    <MenuItem value=\"Board Member\">Board Member</MenuItem>\n                  </Select>\n                  {errors.role && (\n                    <Typography variant=\"caption\" color=\"error\" sx={{ mt: 0.5, display: 'block' }}>\n                      {errors.role}\n                    </Typography>\n                  )}\n                </FormControl>\n              </Grid>\n              <Grid item xs={12} sm={2}>\n                <Button\n                  type=\"submit\"\n                  fullWidth\n                  variant=\"contained\"\n                  disabled={addingUser || !formData.email || !formData.role}\n                  sx={{ height: '56px' }}\n                >\n                  {addingUser ? <CircularProgress size={24} /> : 'Add User'}\n                </Button>\n              </Grid>\n            </Grid>\n          </Box>\n        </CardContent>\n      </Card>\n\n      {/* Role Limits Alert */}\n      {Object.keys(limits).some(role => {\n        const count = currentCounts[role] || 0;\n        const limit = limits[role];\n        return count >= limit;\n      }) && (\n        <Alert severity=\"warning\" sx={{ mb: 3 }}>\n          Some roles have reached their limits. Users cannot be added to these roles until existing users are removed.\n        </Alert>\n      )}\n\n      {/* Users Table */}\n      <Card>\n        <CardContent>\n          <Typography variant=\"h6\" gutterBottom>\n            Current Users\n          </Typography>\n          <TableContainer component={Paper}>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Email</TableCell>\n                  <TableCell>Role</TableCell>\n                  <TableCell>Status</TableCell>\n                  <TableCell>Invited By</TableCell>\n                  <TableCell>Invited At</TableCell>\n                  <TableCell>Registered At</TableCell>\n                  <TableCell>Actions</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {assignments.map((assignment) => (\n                  <TableRow key={assignment._id}>\n                    <TableCell>{assignment.email}</TableCell>\n                    <TableCell>\n                      <Chip \n                        label={assignment.role}\n                        color={getRoleColor(assignment.role)}\n                        size=\"small\"\n                      />\n                    </TableCell>\n                    <TableCell>\n                      <Chip \n                        label={assignment.status}\n                        color={getStatusColor(assignment.status)}\n                        size=\"small\"\n                      />\n                    </TableCell>\n                    <TableCell>\n                      {assignment.invitedBy?.name || 'Unknown'}\n                    </TableCell>\n                    <TableCell>\n                      {new Date(assignment.invitedAt).toLocaleDateString()}\n                    </TableCell>\n                    <TableCell>\n                      {assignment.registeredAt \n                        ? new Date(assignment.registeredAt).toLocaleDateString()\n                        : 'Not registered'\n                      }\n                    </TableCell>\n                    <TableCell>\n                      <IconButton\n                        onClick={() => handleDeleteUser(assignment._id)}\n                        color=\"error\"\n                        size=\"small\"\n                      >\n                        <DeleteIcon />\n                      </IconButton>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer>\n        </CardContent>\n      </Card>\n    </Container>\n  );\n};\n\nexport default RoleManagement; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}